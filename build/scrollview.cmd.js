!function(a,b,c){function d(d,g){function h(a,b){var c=e.createEvent("HTMLEvents");if(c.initEvent(a,!1,!1),b)for(var d in b)c[d]=b[d];i.dispatchEvent(c)}var i,j,k=this,l=Date.now()+"-"+ ++f;if(1!==arguments.length||arguments[0]instanceof HTMLElement||(g=arguments[0],d=null),g=g||{},i=d||g.scrollWrap||e.createElement("div"),j=g.scrollElement||i.firstElementChild||e.createElement("div"),j.parentNode||i.appendChild(j),i!==j.parentNode)return void console.error(j," is not the child of ",i);var m=getComputedStyle(i);m.width&&m.height&&"hidden"===m.overflow||console.warn("必须设置滚动元素的（scrollElement）父级元素（scrollWrap）的width/height/overflow(hidden)"),i.setAttribute("data-ctrl-name","scrollview"),i.setAttribute("data-ctrl-id",l),i.className.indexOf("scroll-wrap")<0&&(i.className=i.className.split(" ").concat("scroll-wrap").join(" ").replace(/^\s+/,"")),j.className.indexOf("scroll-view")<0&&(j.className=j.className.split(" ").concat("scroll-view").join(" ").replace(/^\s+/,"")),g.scrollElement=j,g.scrollWrap=i;var n=new b.scroll(g);for(var o in n)void function(a){"function"==typeof n[a]?k[a]=function(){return n[a].apply(n,arguments)}:Object.defineProperty(k,a,{get:function(){return n[a]},set:function(b){n[a]=b}})}(o);n.init();var p={};Object.defineProperty(this,"plugin",{get:function(){return p}}),Object.defineProperty(p,"forceRepaint",{set:function(a){a&&n.enablePlugin("force-repaint")}}),Object.defineProperty(p,"fixed",{set:function(a){if(a){var b={};if(a instanceof HTMLElement||"string"==typeof a)n.enablePlugin("fixed",{topElement:a});else if("object"==typeof a){var c=["top","bottom","left","right"].filter(function(b){return null!=a[b]})[0];c?(b[c+"Offset"]=a[c],b[c+"Element"]=a.element):b=a,n.enablePlugin("fixed",b)}}}}),Object.defineProperty(p,"lazyload",{set:function(a){a&&(n.enablePlugin("lazyload",{realTimeLoad:a===!0?!0:!!a.realTimeLoad,onlazyload:function(){h("plugin:lazyload"),a.onlazyload&&a.onlazyload.apply(a,arguments)}}),a.onlazyload&&k.addEventListener("plugin:lazyload",a.onlazyload))}}),Object.defineProperty(p,"sticky",{set:function(a){a&&(a===!0?n.enablePlugin("sticky"):a&&"object"==typeof a&&n.enablePlugin("sticky",a))}}),Object.defineProperty(p,"refresh",{set:function(b){if(b){var d,e,f=a.rem?3*a.rem:60,g="下拉即可刷新...",i="正在刷新...";b&&"object"==typeof b&&(f=b.height||f,e=b.element||e,g=(b.text||[])[0]||b.pullingText||g,i=(b.text||[])[1]||b.processingText||i),e||(d=new c.loading,d.arrowDirection="down",d.mode="draw",d.text=g,e=d.element),n.enablePlugin("refresh",{height:f,element:e,onpull:function(a){d&&(d.per=Math.round(a/f*100)),h("plugin:refresh:pull"),b.onpull&&b.onpull.apply(b,arguments)},onrefresh:function(a){function c(){e||(e=!0,a(),d&&(d.text=g,d.mode="draw"))}var e=!1;d&&(d.text=i,d.mode="spin"),h("plugin:refresh",{done:c}),b.onrefresh&&b.onrefresh(c)}})}}}),Object.defineProperty(p,"update",{set:function(b){if(b){var d,e,f=a.rem?3*a.rem:60,g="上拉加载更多...",i="正在加载...";if(b&&"object"==typeof b&&(f=b.height||f,e=b.element||e,g=(b.text||[])[0]||b.pullingText||g,i=(b.text||[])[1]||b.processingText||i),!e){var d=new c.loading;d.arrowDirection="up",d.mode="draw",d.text=g,e=d.element}n.enablePlugin("update",{height:f,element:e,onupdate:function(a){function c(){e||(e=!0,a(),d&&(d.text=g,d.mode="draw"))}var e=!1;d&&(d.text=i,d.mode="spin"),h("plugin:update",{done:c}),b.onupdate&&b.onupdate(c)}})}}}),Object.defineProperty(this,"content",{get:function(){return Array.prototype.slice.call(j.childNodes)},set:function(a){if("string"==typeof a)j.innerHTML=a;else if(a instanceof HTMLElement)j.innerHTML="",j.appendChild(a);else if(a instanceof Array||a instanceof NodeList){var b=e.createDocumentFragment();Array.prototype.slice.call(a).forEach(function(a){b.appendChild(a)}),j.appendChild(b)}}}),this.addEventListener=function(a,b){this.root.addEventListener(a,b,!1)},this.removeEventListener=function(a,b){this.root.removeEventListener(a,b,!1)},this.scrollWrap=this.root=i,this.scrollElement=this.element=j,this.scroll=n}var e=a.document,f=0;c.scrollview=d}(window,window.lib,window.ctrl||(window.ctrl={}));
if (window.KISSY) {KISSY.add('mtb/ctrl-scrollview/0.1.1/scrollview.cmd',function() {return window.ctrl.scrollview;},{requries:['mtb/lib-scroll','mtb/lib-scroll/plugin','mtb/ctrl-loading','mtb/ctrl-scrollview/0.1.1/scrollview.css']});} else if ('undefined' !== typeof define) {define('mtb/ctrl-scrollview/0.1.1/scrollview.cmd', [], function(require){require('mtb/lib-scroll');require('mtb/lib-scroll/plugin');require('mtb/ctrl-loading');require('mtb/ctrl-scrollview/0.1.1/scrollview.css');return window.ctrl.scrollview;});}