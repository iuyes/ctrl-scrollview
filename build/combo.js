!function(a,b){function c(a,b){function c(){r||(r=!0,l=a.querySelector("canvas"),m=l.getContext("2d"),p=.13373158940994154,q=.06015722128359704);var b=l.getBoundingClientRect();(l.width!==b.width*s||l.height!==b.height*s)&&(l.width=b.width*s,l.height=b.height*s,n=b.width/2,o=n/15)}function f(){if("spin"===t){c();var a=0;!function(){"spin"===t&&(m.clearRect(0,0,l.width,l.height),m.beginPath(),m.arc(n*s,n*s,(n-o)*s,-p-Math.PI/2-a,-p-Math.PI/2-100*q-a,!0),m.lineWidth=o*s,m.strokeStyle="#ff5000",m.stroke(),m.closePath(),a+=4*Math.PI/60,d(arguments.callee))}()}}function g(a){"draw"===t&&(c(),a>100&&(a=100),m.clearRect(0,0,l.width*s,l.height*s),m.beginPath(),m.arc(n*s,n*s,(n-o)*s,-p-Math.PI/2,-p-Math.PI/2-q*a,!0),m.lineWidth=o*s,m.strokeStyle="#ff5000",m.stroke(),m.closePath())}function h(){var b=a.querySelector(".arrow");b.style.cssText="display: block"}function i(){var b=a.querySelector(".arrow");b.style.webkitTransform="scale(1)",b.style.opacity="1",d(function(){b.style.webkitTransition="-webkit-transform 0.4s ease-in 0, opacity 0.4s ease-in 0",b.style.webkitTransform="scale(0.5)",b.style.opacity="0",b.addEventListener("webkitTransitionEnd",function(){b.removeEventListener("webkitTransitionEnd",arguments.callee),b.style.cssText="display:none;"})})}var j=Date.now()+"-"+ ++e,k=document.createDocumentFragment();1!==arguments.length||arguments[0]instanceof HTMLElement||(b=arguments[0],a=null),a||(a=document.createElement("div"),k.appendChild(a)),b=b||{},a.setAttribute("data-ctrl-name","loading"),a.setAttribute("data-ctrl-id",j),a.innerHTML='<div><canvas></canvas><span class="arrow"></span></div><span class="text"></span>';var l,m,n,o,p,q,r=!1,s=2;Object.defineProperty(this,"bgcolor",{get:function(){return a.style.backgroundColor},set:function(b){if("string"!=typeof b)throw new Error("Non expected value");a.style.backgroundColor=b}}),Object.defineProperty(this,"text",{get:function(){return a.querySelector(".text").innerText},set:function(b){if("string"!=typeof b)throw new Error("Non expected value");var c=a.querySelector("div"),d=a.querySelector(".text");b?(a.style.webkitBoxPack="",c.style.marginLeft="",d.style.display="block",d.innerText=b):(a.style.webkitBoxPack="center",c.style.marginLeft="0",d.style.display="none",d.innerText="")}});var t="";Object.defineProperty(this,"mode",{get:function(){return t},set:function(a){if(!a&&"string"!=typeof a&&["draw","spin"].indexOf(a)<0)throw new Error("Non expected value");t=a,"spin"===t?(v&&i(),f()):"draw"===t&&(h(),g(0))}});var u=0;Object.defineProperty(this,"per",{get:function(){return u},set:function(a){if("draw"!==t)throw new Error('only work under "draw" mode');if(!a&&"number"!=typeof a&&0>a&&a>100)throw new Error("Non expected value");g(a)}});var v="";Object.defineProperty(this,"arrowDirection",{get:function(){return v},set:function(b){if(!b&&"string"!=typeof b&&["up","down",""].indexOf(b)<0)throw new Error("Non expected value");v=b,a.querySelector(".arrow").className="arrow "+b}}),this.remove=function(){a.parentNode&&a.parentNode.removeChild(a)},this.element=a,this.root=k}var d=a.requestAnimationFrame||a.webkitRequestAnimationFrame||function(a){setTimeout(a,1/60*1e3)},e=0;b.loading=c}(window,window.ctrl||(window.ctrl={}));!function(a,b){function c(a,b){return[[(a/3+(a+b)/3-a)/(b-a),(a*a/3+a*b*2/3-a*a)/(b*b-a*a)],[(b/3+(a+b)/3-a)/(b-a),(b*b/3+a*b*2/3-a*a)/(b*b-a*a)]]}function d(a){if(this.v=a.v||0,this.a=a.a||0,"undefined"!=typeof a.t&&(this.t=a.t),"undefined"!=typeof a.s&&(this.s=a.s),"undefined"==typeof this.t)if("undefined"==typeof this.s)this.t=-this.v/this.a;else{var b=(Math.sqrt(this.v*this.v+2*this.a*this.s)-this.v)/this.a,c=(-Math.sqrt(this.v*this.v+2*this.a*this.s)-this.v)/this.a;this.t=Math.min(b,c)}"undefined"==typeof this.s&&(this.s=this.a*this.t*this.t/2+this.v*this.t)}d.prototype.generateCubicBezier=function(){return c(this.v/this.a,this.t+this.v/this.a)},b.motion=d}(window,window.lib||(window.lib={}));!function(a){"use strict";function b(a,b){for(var c=a;c;){if(c.contains(b)||c==b)return c;c=c.parentNode}return null}function c(a,b,c){var d=i.createEvent("HTMLEvents");if(d.initEvent(b,!0,!0),"object"==typeof c)for(var e in c)d[e]=c[e];a.dispatchEvent(d)}function d(a,b,c,d,e,f,g,h){var i=Math.atan2(h-f,g-e)-Math.atan2(d-b,c-a),j=Math.sqrt((Math.pow(h-f,2)+Math.pow(g-e,2))/(Math.pow(d-b,2)+Math.pow(c-a,2))),k=[e-j*a*Math.cos(i)+j*b*Math.sin(i),f-j*b*Math.cos(i)-j*a*Math.sin(i)];return{rotate:i,scale:j,translate:k,matrix:[[j*Math.cos(i),-j*Math.sin(i),k[0]],[j*Math.sin(i),j*Math.cos(i),k[1]],[0,0,1]]}}function e(a){0===Object.keys(l).length&&(j.addEventListener("touchmove",f,!1),j.addEventListener("touchend",g,!1),j.addEventListener("touchcancel",h,!1));for(var d=0;d<a.changedTouches.length;d++){var e=a.changedTouches[d],i={};for(var m in e)i[m]=e[m];var n={startTouch:i,startTime:Date.now(),status:"tapping",element:a.srcElement,pressingHandler:setTimeout(function(b){return function(){"tapping"===n.status&&(n.status="pressing",c(b,"press",{touchEvent:a})),clearTimeout(n.pressingHandler),n.pressingHandler=null}}(a.srcElement),500)};l[e.identifier]=n}if(2==Object.keys(l).length){var o=[];for(var m in l)o.push(l[m].element);c(b(o[0],o[1]),"dualtouchstart",{touches:k.call(a.touches),touchEvent:a})}}function f(a){for(var e=0;e<a.changedTouches.length;e++){var f=a.changedTouches[e],g=l[f.identifier];if(!g)return;g.lastTouch||(g.lastTouch=g.startTouch),g.lastTime||(g.lastTime=g.startTime),g.velocityX||(g.velocityX=0),g.velocityY||(g.velocityY=0),g.duration||(g.duration=0);var h=Date.now()-g.lastTime,i=(f.clientX-g.lastTouch.clientX)/h,j=(f.clientY-g.lastTouch.clientY)/h,k=70;h>k&&(h=k),g.duration+h>k&&(g.duration=k-h),g.velocityX=(g.velocityX*g.duration+i*h)/(g.duration+h),g.velocityY=(g.velocityY*g.duration+j*h)/(g.duration+h),g.duration+=h,g.lastTouch={};for(var m in f)g.lastTouch[m]=f[m];g.lastTime=Date.now();var n=f.clientX-g.startTouch.clientX,o=f.clientY-g.startTouch.clientY,p=Math.sqrt(Math.pow(n,2)+Math.pow(o,2));("tapping"===g.status||"pressing"===g.status)&&p>10&&(g.status="panning",g.isVertical=!(Math.abs(n)>Math.abs(o)),c(g.element,"panstart",{touch:f,touchEvent:a,isVertical:g.isVertical}),c(g.element,(g.isVertical?"vertical":"horizontal")+"panstart",{touch:f,touchEvent:a})),"panning"===g.status&&(g.panTime=Date.now(),c(g.element,"pan",{displacementX:n,displacementY:o,touch:f,touchEvent:a,isVertical:g.isVertical}),g.isVertical?c(g.element,"verticalpan",{displacementY:o,touch:f,touchEvent:a}):c(g.element,"horizontalpan",{displacementX:n,touch:f,touchEvent:a}))}if(2==Object.keys(l).length){for(var q,r=[],s=[],t=[],e=0;e<a.touches.length;e++){var f=a.touches[e],g=l[f.identifier];r.push([g.startTouch.clientX,g.startTouch.clientY]),s.push([f.clientX,f.clientY])}for(var m in l)t.push(l[m].element);q=d(r[0][0],r[0][1],r[1][0],r[1][1],s[0][0],s[0][1],s[1][0],s[1][1]),c(b(t[0],t[1]),"dualtouch",{transform:q,touches:a.touches,touchEvent:a})}}function g(a){if(2==Object.keys(l).length){var d=[];for(var e in l)d.push(l[e].element);c(b(d[0],d[1]),"dualtouchend",{touches:k.call(a.touches),touchEvent:a})}for(var i=0;i<a.changedTouches.length;i++){var n=a.changedTouches[i],o=n.identifier,p=l[o];if(p){if(p.pressingHandler&&(clearTimeout(p.pressingHandler),p.pressingHandler=null),"tapping"===p.status&&(p.timestamp=Date.now(),c(p.element,"tap",{touch:n,touchEvent:a}),m&&p.timestamp-m.timestamp<300&&c(p.element,"doubletap",{touch:n,touchEvent:a}),m=p),"panning"===p.status){var q=Date.now(),r=q-p.startTime,s=((n.clientX-p.startTouch.clientX)/r,(n.clientY-p.startTouch.clientY)/r,n.clientX-p.startTouch.clientX),t=n.clientY-p.startTouch.clientY,u=Math.sqrt(p.velocityY*p.velocityY+p.velocityX*p.velocityX),v=u>.5&&q-p.lastTime<100,w={duration:r,isflick:v,velocityX:p.velocityX,velocityY:p.velocityY,displacementX:s,displacementY:t,touch:n,touchEvent:a,isVertical:p.isVertical};c(p.element,"panend",w),v&&(c(p.element,"flick",w),p.isVertical?c(p.element,"verticalflick",w):c(p.element,"horizontalflick",w))}"pressing"===p.status&&c(p.element,"pressend",{touch:n,touchEvent:a}),delete l[o]}}0===Object.keys(l).length&&(j.removeEventListener("touchmove",f,!1),j.removeEventListener("touchend",g,!1),j.removeEventListener("touchcancel",h,!1))}function h(a){if(2==Object.keys(l).length){var d=[];for(var e in l)d.push(l[e].element);c(b(d[0],d[1]),"dualtouchend",{touches:k.call(a.touches),touchEvent:a})}for(var i=0;i<a.changedTouches.length;i++){var m=a.changedTouches[i],n=m.identifier,o=l[n];o&&(o.pressingHandler&&(clearTimeout(o.pressingHandler),o.pressingHandler=null),"panning"===o.status&&c(o.element,"panend",{touch:m,touchEvent:a}),"pressing"===o.status&&c(o.element,"pressend",{touch:m,touchEvent:a}),delete l[n])}0===Object.keys(l).length&&(j.removeEventListener("touchmove",f,!1),j.removeEventListener("touchend",g,!1),j.removeEventListener("touchcancel",h,!1))}var i=a.document,j=i.documentElement,k=Array.prototype.slice,l={},m=null;j.addEventListener("touchstart",e,!1)}(window,window.lib||(window.lib={}));!function(a,b){function c(a,b,c,d){function e(a){return(3*k*a+2*l)*a+m}function f(a){return((k*a+l)*a+m)*a}function g(a){return((n*a+o)*a+p)*a}function h(a){for(var b,c,d=a,g=0;8>g;g++){if(c=f(d)-a,Math.abs(c)<j)return d;if(b=e(d),Math.abs(b)<j)break;d-=c/b}var h=1,i=0;for(d=a;h>i;){if(c=f(d)-a,Math.abs(c)<j)return d;c>0?h=d:i=d,d=(h+i)/2}return d}function i(a){return g(h(a))}var j=1e-6,k=3*a-3*c+1,l=3*c-6*a,m=3*a,n=3*b-3*d+1,o=3*d-6*b,p=3*b;return i}b.cubicbezier=c,b.cubicbezier.liner=c(0,0,1,1),b.cubicbezier.ease=c(.25,.1,.25,1),b.cubicbezier.easeIn=c(.42,0,1,1),b.cubicbezier.easeOut=c(0,0,.58,1),b.cubicbezier.easeInOut=c(.42,0,.58,1)}(window,window.lib||(window.lib={}));!function(a,b){function c(b){function d(){e=!0,i&&i.forEach(function(a){a&&a()})}var e=!1;Object.defineProperty(this,"isRequested",{get:function(){return e}});var f,i=[],j=!1;this.request=function(){if(!e){var c=arguments;return j=!1,f=g(function(){j||(b.apply(a,c),d())}),this}},this.cancel=function(){f&&(j=!0,h(f))},this.then=function(a){return e?a&&a():i.push(a),this},this.clone=function(){return new c(b)}}function d(a,d,e,g){"function"==typeof g&&(g={0:g});for(var h=a/f,i=1/h,j=[],k=Object.keys(g).map(function(a){return parseInt(a)}),l=0;h>l;l++){var m=k[0],n=i*l;if(null!=m&&100*n>=m){var o=g[""+m];o instanceof c||(o=new c(o)),j.push(o),k.shift()}else j.length&&j.push(j[j.length-1].clone())}var p;"string"==typeof d||d instanceof Array?b.cubicbezier?"string"==typeof d?b.cubicbezier[d]&&(p=b.cubicbezier[d]):d instanceof Array&&4===d.length&&(p=b.cubicbezier.apply(b.cubicbezier,d)):console.error("require lib.cubicbezier"):"function"==typeof d&&(p=d),p||console.error("unexcept timing function");var q,r=!1,s=0,t=0;this.play=function(){function a(){r=!1,u&&u()}function b(){var a=i*(t+1).toFixed(10);q=j[t],q.request(a.toFixed(10),d(a).toFixed(10)),q.then(function(){t++,c()})}function c(){r&&(t===j.length?a():b())}if(!r)return r=!0,s=setTimeout(function(){s=0,c()},!t&&e||0),this},this.stop=function(){return r?(r=!1,s&&(clearTimeout(s),s=0),q&&q.cancel(),this):void 0};var u;this.onend=function(a){u=a}}var e=60,f=1e3/e,g=window.requestAnimationFrame||window.webkitRequestAnimationFrame||function(a){return setTimeout(a,f)},h=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||function(a){clearTimeout(a)};b.animation=d,b.animation.Frame=c,b.animation.requestFrame=function(a){var b=new c(a);return b.request(),b}}(window,window.lib||(window.lib={}));!function(a,b){function c(){b.scroll.outputDebugLog&&console.debug.apply(console,arguments)}function d(a){var b=a.getBoundingClientRect();if(!b){b={},b.width=a.offsetWidth,b.height=a.offsetHeight,b.left=a.offsetLeft,b.top=a.offsetTop;for(var c=a.offsetParent;c;)b.left+=c.offsetLeft,b.top+=c.offsetTop,c=c.offsetParent;b.right=b.left+b.width,b.bottom=b.top+b.height}return b}function e(a){return 0-a.options[a.axis+"Padding1"]}function f(a){var b=d(a.element),c=d(a.viewport),f=e(a);if("y"===a.axis)var g=0-b.height+c.height;else var g=0-b.width+c.width;return Math.min(g+a.options[a.axis+"Padding2"],f)}function g(a,b){return b>a.minScrollOffset?b-a.minScrollOffset:b<a.maxScrollOffset?b-a.maxScrollOffset:void 0}function h(a,b){return b>a.minScrollOffset?b=a.minScrollOffset:b<a.maxScrollOffset&&(b=a.maxScrollOffset),b}function i(a,b,d){c(a.element.scrollId,b,d);var e=m.createEvent("HTMLEvents");if(e.initEvent(b,!1,!0),e.scrollObj=a,d)for(var f in d)e[f]=d[f];a.element.dispatchEvent(e),a.viewport.dispatchEvent(e)}function j(a){var b,c={x:0,y:0},d=getComputedStyle(a.element).webkitTransform;return"none"!==d&&(b=d.match(/^matrix3d\((?:[-\d.]+,\s*){12}([-\d.]+),\s*([-\d.]+)(?:,\s*[-\d.]+){2}\)/)||d.match(/^matrix\((?:[-\d.]+,\s*){4}([-\d.]+),\s*([-\d.]+)\)$/))&&(c.x=parseFloat(b[1])||0,c.y=parseFloat(b[2])||0),c}function k(a,b){return a=parseFloat(a),b=parseFloat(b),0!=a&&(a+="px"),0!=b&&(b+="px"),q?"translate3d("+a+", "+b+", 0)":"translate("+a+", "+b+")"}function l(a,l){function m(a){return B||H?(a.preventDefault(),a.stopPropagation(),!1):!0}function q(a){B||H||setTimeout(function(){var b=document.createEvent("HTMLEvents");b.initEvent("niceclick",!0,!0),a.target.dispatchEvent(b)},300)}function s(a,c){E=null,clearTimeout(F),F=setTimeout(function(){E&&(E=null,b.animation.requestFrame(a))},c||400),E=a}function t(){if(A.enabled)if(H&&z(),l.useFrameAnimation)D&&D.stop(),D=null;else{var b=j(A);a.style.webkitTransform=k(b.x,b.y),a.style.webkitTransition="",E=null,clearTimeout(F)}}function u(){if(A.enabled){var c=j(A)[A.axis],d=g(A,c);if(d){var e=h(A,c);if(d>0?i(A,"y"===A.axis?"pulldownend":"pullrightend"):0>d&&i(A,"y"===A.axis?"pullupend":"pullleftend"),l.useFrameAnimation){var f=e-c;D=new b.animation(400,b.cubicbezier.ease,0,function(b,d){var e=(c+f*d).toFixed(2);a.style.webkitTransform="y"===A.axis?k(0,e):k(e,0),i(A,"scrolling")}),D.onend(z),D.play()}else{a.style.webkitTransition="-webkit-transform 0.4s ease 0";var m=e.toFixed(0);a.style.webkitTransform="y"===A.axis?k(0,m):k(m,0),s(z,400),b.animation.requestFrame(function(){H&&A.enabled&&(i(A,"scrolling"),b.animation.requestFrame(arguments.callee))})}}else H&&z()}}function v(a){A.enabled&&("y"!==A.axis&&a.isVertical||"x"===A.axis&&a.isVertical||(A.transformOffset=j(A),A.minScrollOffset=e(A),A.maxScrollOffset=f(A),G=2.5,J=!0,H=!0,I=!1,i(A,"scrollstart"),K=a["displacement"+A.axis.toUpperCase()]))}function w(b){if(A.enabled&&("y"===A.axis&&b.isVertical||"x"===A.axis&&!b.isVertical)){b.stopPropagation();var c=b["displacement"+A.axis.toUpperCase()];if(Math.abs(c-K)<5)return b.stopPropagation(),void 0;K=c;var d=A.transformOffset[A.axis]+c;d>A.minScrollOffset?(d=A.minScrollOffset+(d-A.minScrollOffset)/G,G*=1.003):d<A.maxScrollOffset&&(d=A.maxScrollOffset-(A.maxScrollOffset-d)/G,G*=1.003),G>4&&(G=4);var e=g(A,d);e&&(i(A,e>0?"y"===A.axis?"pulldown":"pullright":"y"===A.axis?"pullup":"pullleft",{boundaryOffset:Math.abs(e)}),A.options.noBounce&&(d=h(A,d))),a.style.webkitTransform="y"===A.axis?k(0,d.toFixed(2)):k(d.toFixed(2),0),i(A,"scrolling")}}function x(a){A.enabled&&("y"===A.axis&&a.isVertical||"x"===A.axis&&!a.isVertical)&&(a.stopPropagation(),a.isflick&&y(a))}function y(d){J=!0;var e,f,h,m,n,o,q,r,t,u,v,w,x,y,B,C,E;m=j(A)[A.axis];var F=g(A,m);if(!F){e=d["velocity"+A.axis.toUpperCase()];var G=2,K=.0015;l.inertia&&p[l.inertia]&&(G=p[l.inertia][0],K=p[l.inertia][1]),e>G&&(e=G),-G>e&&(e=-G),f=K*(e/Math.abs(e)),o=new b.motion({v:e,a:-f}),h=o.t,n=m+o.s;var L=g(A,n);if(L){c("惯性计算超出了边缘",L),q=e,r=f,L>0?(u=A.minScrollOffset,w=1):(u=A.maxScrollOffset,w=-1),v=new b.motion({v:w*q,a:-w*r,s:Math.abs(u-m)}),t=v.t;var M=v.generateCubicBezier();x=q-r*t,y=.03*(x/Math.abs(x)),E=new b.motion({v:x,a:-y}),B=E.t,C=u+E.s;{E.generateCubicBezier()}if(l.noBounce)if(c("没有回弹效果"),m!==u)if(l.useFrameAnimation){var N=u-m,O=b.cubicbezier(M[0][0],M[0][1],M[1][0],M[1][1]);D=new b.animation(t.toFixed(0),O,0,function(b,c){i(A,"scrolling",{afterFlick:!0});var d=m+N*c;a.style.webkitTransform="y"===A.axis?k(0,d.toFixed(2)):k(d.toFixed(2),0)}),D.onend(z),D.play()}else{a.style.webkitTransition="-webkit-transform "+(t/1e3).toFixed(2)+"s cubic-bezier("+M+") 0";var P=u.toFixed(0);a.style.webkitTransform="y"===A.axis?k(0,P):k(P,0),s(z,1e3*(t/1e3).toFixed(2))}else z();else if(m!==C)if(c("惯性滚动","s="+C.toFixed(0),"t="+((t+B)/1e3).toFixed(2)),l.useFrameAnimation){var N=C-m,O=b.cubicbezier.easeOut;D=new b.animation((t+B).toFixed(0),O,0,function(b,c){i(A,"scrolling",{afterFlick:!0});var d=m+N*c;a.style.webkitTransform="y"===A.axis?k(0,d.toFixed(2)):k(d.toFixed(2),0)}),D.onend(function(){if(A.enabled){var c=u-C,d=b.cubicbezier.ease;D=new b.animation(400,d,0,function(b,d){i(A,"scrolling",{afterFlick:!0});var e=C+c*d;a.style.webkitTransform="y"===A.axis?k(0,e.toFixed(2)):k(e.toFixed(2),0)}),D.onend(z),D.play()}}),D.play()}else{a.style.webkitTransition="-webkit-transform "+((t+B)/1e3).toFixed(2)+"s ease-out 0";var P=C.toFixed(0);a.style.webkitTransform="y"===A.axis?k(0,P):k(P,0),s(function(){if(A.enabled)if(c("惯性回弹","s="+u.toFixed(0),"t=400"),C!==u){a.style.webkitTransition="-webkit-transform 0.4s ease 0";var b=u.toFixed(0);a.style.webkitTransform="y"===A.axis?k(0,b):k(b,0),s(z,400)}else z()},1e3*((t+B)/1e3).toFixed(2))}else z()}else{c("惯性计算没有超出边缘");var Q=o.generateCubicBezier();if(l.useFrameAnimation){var N=n-m,O=b.cubicbezier(Q[0][0],Q[0][1],Q[1][0],Q[1][1]);D=new b.animation(h.toFixed(0),O,0,function(b,c){i(A,"scrolling",{afterFlick:!0});var d=(m+N*c).toFixed(2);a.style.webkitTransform="y"===A.axis?k(0,d):k(d,0)}),D.onend(z),D.play()}else{a.style.webkitTransition="-webkit-transform "+(h/1e3).toFixed(2)+"s cubic-bezier("+Q+") 0";var P=n.toFixed(0);a.style.webkitTransform="y"===A.axis?k(0,P):k(P,0),s(z,1e3*(h/1e3).toFixed(2))}}I=!0,l.useFrameAnimation||b.animation.requestFrame(function(){H&&I&&A.enabled&&(i(A,"scrolling",{afterFlick:!0}),b.animation.requestFrame(arguments.callee))})}}function z(){A.enabled&&(J=!1,setTimeout(function(){!J&&H&&(H=!1,I=!1,l.useFrameAnimation?(D&&D.stop(),D=null):a.style.webkitTransition="",i(A,"scrollend"))},50))}var A=this;if(l=l||{},l.noBounce=!!l.noBounce,l.padding=l.padding||{},l.isPrevent=null==l.isPrevent?!0:!!l.isPrevent,l.isFixScrollendClick=null==l.isFixScrollendClick?!0:!!l.isFixScrollendClick,l.padding?(l.yPadding1=-l.padding.top||0,l.yPadding2=-l.padding.bottom||0,l.xPadding1=-l.padding.left||0,l.xPadding2=-l.padding.right||0):(l.yPadding1=0,l.yPadding2=0,l.xPadding1=0,l.xPadding2=0),l.margin?(l.yMargin1=-l.margin.top||0,l.yMargin2=-l.margin.bottom||0,l.xMargin1=-l.margin.left||0,l.xMargin2=-l.margin.right||0):(l.yMargin1=0,l.yMargin2=0,l.xMargin1=0,l.xMargin2=0),l.direction=l.direction||"y",l.inertia=l.inertia||"normal",this.options=l,A.axis=l.direction,this.element=a,this.viewport=a.parentNode,this.plugins={},this.viewport.addEventListener("touchstart",t,!1),this.viewport.addEventListener("touchend",u,!1),this.viewport.addEventListener("touchcancel",u,!1),this.viewport.addEventListener("panstart",v,!1),this.viewport.addEventListener("pan",w,!1),this.viewport.addEventListener("panend",x,!1),this.element.scrollId=setTimeout(function(){n[A.element.scrollId+""]=A},1),l.isPrevent&&(this.viewport.addEventListener("touchstart",function(){r=!0},!1),A.viewport.addEventListener("touchend",function(){r=!1},!1)),l.isFixScrollendClick){var B,C;this.viewport.addEventListener("scrolling",function(){B=!0,C&&clearTimeout(C),C=setTimeout(function(){B=!1},400)},!1),this.viewport.addEventListener("click",m,!1),this.viewport.addEventListener("tap",q,!1)}if(l.useFrameAnimation){var D;Object.defineProperty(this,"animation",{get:function(){return D}})}else{var E,F=0;a.addEventListener("webkitTransitionEnd",function(a){if(E){var c=E;E=null,clearTimeout(F),b.animation.requestFrame(function(){c(a)})}},!1)}var G,H,I,J;Object.defineProperty(this,"isScrolling",{get:function(){return!!H}});var K,L={init:function(){return this.enable(),this.refresh(),this.scrollTo(0),this},enable:function(){return this.enabled=!0,this},disable:function(){var a=this.element;return this.enabled=!1,this.options.useFrameAnimation?this.animation&&this.animation.stop():b.animation.requestFrame(function(){a.style.webkitTransform=getComputedStyle(a).webkitTransform}),this},getScrollWidth:function(){return d(this.element).width},getScrollHeight:function(){return d(this.element).height},getScrollLeft:function(){return-j(this).x-this.options.xPadding1},getScrollTop:function(){return-j(this).y-this.options.yPadding1},getMaxScrollLeft:function(){return-A.maxScrollOffset-this.options.xPadding1},getMaxScrollTop:function(){return-A.maxScrollOffset-this.options.yPadding1},getBoundaryOffset:function(){return Math.abs(g(this,j(this)[this.axis])||0)},refresh:function(){var a=this.element,b="y"===this.axis,c=b?"height":"width";if(null!=this.options[c])a.style[c]=this.options[c]+"px";else if(a.childElementCount>0){var g,h,k=a.firstElementChild,l=a.lastElementChild;if(document.createRange&&(g=document.createRange(),g.selectNodeContents(a),h=d(g)),h)a.style[c]=h[c]+"px";else if(k&&l){for(;k&&0===d(k)[c]&&k.nextElementSibling;)k=k.nextElementSibling;for(;l&&l!==k&&0===d(l)[c]&&l.previousElementSibling;)l=l.previousElementSibling;a.style[c]=d(l)[b?"bottom":"right"]-d(k)[b?"top":"left"]+"px"}else a.style[c]="0"}else a.style[c]="auto",a.style[c]=d(a)[c]+"px";return this.transformOffset=j(this),this.minScrollOffset=e(this),this.maxScrollOffset=f(this),this.scrollTo(-this.transformOffset[this.axis]-this.options[this.axis+"Padding1"]),i(this,"contentrefresh"),this},offset:function(a){var b=d(this.element),c=d(a);if("y"===this.axis){var e={top:c.top-b.top-this.options.yPadding1,left:c.left-b.left,right:b.right-c.right,width:c.width,height:c.height};e.bottom=e.top+e.height}else{var e={top:c.top-b.top,bottom:b.bottom-c.bottom,left:c.left-b.left-this.options.xPadding1,width:c.width,height:c.height};e.right=e.left+e.width}return e},getRect:function(a){var b=d(this.viewport),c=d(a);if("y"===this.axis){var e={top:c.top-b.top,left:c.left-b.left,right:b.right-c.right,width:c.width,height:c.height};e.bottom=e.top+e.height}else{var e={top:c.top-b.top,bottom:b.bottom-c.bottom,left:c.left-b.left,width:c.width,height:c.height};e.right=e.left+e.width}return e},isInView:function(a){var b=d(this.viewport),c=this.getRect(a);return"y"===this.axis?b.top<c.bottom&&b.bottom>c.top:b.left<c.right&&b.right>c.left},scrollTo:function(a,c){var d=this,e=this.element;return a=-a-this.options[this.axis+"Padding1"],a=h(this,a),H=!0,c===!0?(e.style.webkitTransition="-webkit-transform 0.4s ease 0",s(z,400),b.animation.requestFrame(function(){H&&d.enabled&&(i(d,"scrolling"),b.animation.requestFrame(arguments.callee))})):(e.style.webkitTransition="",s(z,1)),e.style.webkitTransform="y"===this.axis?k(j(this).x,a):k(a,j(this).y),this},scrollToElement:function(a,b){var c=this.offset(a);return c=c["y"===this.axis?"top":"left"],this.scrollTo(c,b)},getViewWidth:function(){return d(this.viewport).width},getViewHeight:function(){return d(this.viewport).height},addPulldownHandler:function(a){var b=this;return this.element.addEventListener("pulldownend",function(c){b.disable(),a(c,function(){b.scrollTo(0,!0),b.enable()})},!1),this},addPullupHandler:function(a){var b=this;return this.element.addEventListener("pullupend",function(c){b.disable(),a(c,function(){b.scrollTo(b.getScrollHeight(),!0),b.enable()})},!1),this},addScrollstartHandler:function(a){return this.element.addEventListener("scrollstart",function(b){a(b)},!1),this},addScrollingHandler:function(a){return this.element.addEventListener("scrolling",function(b){a(b)},!1),this},addScrollendHandler:function(a){return this.element.addEventListener("scrollend",function(b){a(b)},!1),this},addEventListener:function(){this.element.addEventListener.apply(this.element,arguments)},removeEventListener:function(){this.element.removeEventListener.apply(this.element,arguments)},enablePlugin:function(a,b){var c=o[a];return c&&!this.plugins[a]&&(this.plugins[a]=!0,b=b||{},c.call(this,a,b)),this}};for(var M in L)this[M]=L[M];delete L}var m=a.document,n={},o={},p={normal:[2,.0015],slow:[1.5,.003],veryslow:[1.5,.005]},q="WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix,r=!1;m.addEventListener("touchmove",function(a){return r?(a.preventDefault(),!1):!0},!1),b.scroll=function(a,b){if(1===arguments.length&&!(arguments[0]instanceof HTMLElement))if(b=arguments[0],b.scrollElement)a=b.scrollElement;else{if(!b.scrollWrap)throw new Error("no scroll element");a=b.scrollWrap.firstElementChild}if(!a.parentNode)throw new Error("wrong dom tree");if(b&&b.direction&&["x","y"].indexOf(b.direction)<0)throw new Error("wrong direction");var c;return c=a.scrollId?n[a.scrollId]:new l(a,b)},b.scroll.plugin=function(a,b){return b?(a=a.split(","),a.forEach(function(a){o[a]=b}),void 0):o[a]}}(window,window.lib||(window.lib={}));!function(a,b){function c(a){var b,c={x:0,y:0},d=getComputedStyle(a).webkitTransform;return"none"!==d&&(b=d.match(/^matrix3d\(\d+, \d+, \d+, \d+, \d+, \d+, \d+, \d+, \d+, \d+, \d+, \d+, ([-\d.]+), ([-\d.]+), [-\d.]+, \d+\)/)||d.match(/^matrix\(\d+, \d+, \d+, \d+, ([-\d.]+), ([-\d.]+)\)$/))&&(c.x=parseInt(b[1])||0,c.y=parseInt(b[2])||0),c}var d=a.document;b.scroll.plugin("force-repaint",function(a,c){function e(){g.style.opacity=Math.abs(parseInt(g.style.opacity)-1)+""}var f=this,g=(this.options,this.forceRepaintElement=d.createElement("div"));g.className="force-repaint",g.style.cssText="position: absolute; top: 0; left: 0; width: 0; height: 0; font-size: 0; opacity: 1; translateZ(0)",this.viewport.appendChild(g),c.whenScrolling!==!1?this.addScrollingHandler(e):b.animation.requestFrame(function(){f.isScrolling&&e(),b.animation.requestFrame(arguments.callee)})}),b.scroll.plugin("fixed",function(a,b){function c(a,b){"string"==typeof a?b.innerHTML=a:a instanceof HTMLElement&&b.appendChild(a)}this.options;getComputedStyle(this.viewport).position.match(/^relative|absolute$/)||(this.viewport.style.position="relative"),getComputedStyle(this.element).position.match(/^relative|absolute$/)||(this.element.style.position="absolute");var e=d.createDocumentFragment();if("y"===this.axis){var f=b.topOffset||0,g=b.bottomOffset||0,h=this.topFixedElement=d.createElement("div");h.className="top-fixed",h.style.cssText="z-index:9; position: absolute; top: "+f+"px; left: 0; width: 100%; -webkit-transform: translateZ(9px);";var i=this.bottomFixedElement=d.createElement("div");i.className="bottom-fxied",i.style.cssText="z-index:9; position: absolute; bottom: "+g+"px; left: 0; width: 100%; -webkit-transform: translateZ(9px);",b.topElement&&c(b.topElement,h),b.bottomElement&&c(b.bottomElement,i),e.appendChild(h),e.appendChild(i)}else{var j=b.leftOffset||0,k=b.rightOffset||0,l=this.leftFixedElement=d.createElement("div");l.className="left-fixed",l.style.cssText="z-index:9; position: absolute; top: 0; left: "+j+"px; height: 100%; -webkit-transform: translateZ(9px);";var m=this.rightFixedElement=d.createElement("div");m.className="right-fxied",m.style.cssText="z-index:9; position: absolute; top: 0; right: "+k+"px; height: 100%; -webkit-transform: translateZ(9px);",b.leftElement&&c(b.leftElement,l),b.rightElement&&c(b.rightElement,m),e.appendChild(l),e.appendChild(m)}this.viewport.appendChild(e)}),b.scroll.plugin("lazyload",function(a,c){function d(){if(!k){if(k=!0,g>i&&h.length>0){var a=h.shift();i++;var b=new Image;b.src=a,b.onload=b.onreadystatechange=function(){j[a]!==!0&&(j[a].forEach(function(b){b&&b(a)}),j[a]=!0,i--),d()},d()}k=!1}}function e(a,b){return j[a]===!0?b(a):(j[a]?j[a].push(b):(j[a]=[b],h.push(a)),d(),void 0)}var f=this,g=(this.options,4),h=[],i=0,j={},k=!1;this.checkLazyload=function(){var a=Array.prototype.slice.call(this.element.querySelectorAll(".lazy"));a.filter(function(a){return f.isInView(a)}).forEach(function(a){var b,d;"IMG"===a.tagName.toUpperCase()?(b=[a],d=[]):(b=Array.prototype.slice.call(a.querySelectorAll("img[data-src]")),d=Array.prototype.slice.call(a.querySelectorAll("*[data-image]")),a.hasAttribute("data-image")&&d.push(a)),b.forEach(function(a){var b=a.getAttribute("data-src");b&&(a.removeAttribute("data-src"),e(b,function(){a.src=b}))}),d.forEach(function(a){var b=a.getAttribute("data-image");b&&(a.removeAttribute("data-image"),e(b,function(){a.style.backgroundImage="url("+b+")"}))}),c.onlazyload&&c.onlazyload(a),a.className=a.className.split(" ").filter(function(a){return"lazy"!==a}).join(" ")})},c.realTimeLoad&&(this.enablePlugin("force-repaint"),this.addScrollingHandler(function(){f.checkLazyload()})),this.addScrollendHandler(function(){f.checkLazyload()}),this.element.addEventListener("contentrefresh",function(){f.checkLazyload()}),b.animation.requestFrame(function(){f.checkLazyload()})}),b.scroll.plugin("sticky",function(a,b){this.enablePlugin("force-repaint");var c=this.options,e=(b.offset||0)+(c.padding.top||0),f=this.stickyWrapElement=d.createElement("div");f.className="stick-wrap",f.style.cssText="z-index:9; position: absolute; top: "+e+"px; left: 0; width: 100%; -webkit-transform: translateZ(9px);",this.viewport.appendChild(f),this.makeSticky=function(a){var b=this;if(a){if(a.className.indexOf("sticky-able")>=0)return;a.style.position="absolute",a.className=a.className.split(/\s+/).filter(function(a){return"sticky"!=a}).join(" ")+" sticky-able";var c=a.parentNode;this.addScrollingHandler(function(){b.checkSticky(a,c)}),this.addScrollendHandler(function(){b.checkSticky(a,c)})}else Array.prototype.slice.call(this.element.querySelectorAll(".sticky")).forEach(function(a){b.makeSticky(a)})},this.checkSticky=function(a,b){this.getRect(b).top<e?this.stickyWrapElement.appendChild(a):this.getRect(b).top>e&&b.appendChild(a)},this.makeSticky()}),b.scroll.plugin("refresh",function(a,e){function f(){j||(j=!0,g.disable(),b.animation.requestFrame(function(){i.style.webkitTransition="-webkit-transform 0.4s ease 0",i.style.webkitTransform="translateY(0) translateZ(9px)",g.element.style.webkitTransition="-webkit-transform 0.4s ease 0",g.element.style.webkitTransform="translateY("+(g.minScrollOffset+e.height)+"px) translateZ(9px)"}),setTimeout(function(){e.onrefresh.call(g,function(){b.animation.requestFrame(function(){i.style.webkitTransition="-webkit-transform 0.4s ease 0",i.style.webkitTransform="translateY(-"+e.height+"px) translateZ(9px)",g.scrollTo(0,!0),setTimeout(function(){i.style.webkitTransition="",i.style.webkitTransform="translateY(-"+e.height+"px) translateZ(9px)",g.enable(),g.refresh(),j=!1},400)})})},400))}var g=this,h=this.options;getComputedStyle(this.viewport).position.match(/^relative|absolute$/)||(this.viewport.style.position="relative"),getComputedStyle(this.element).position.match(/^relative|absolute$/)||(this.element.style.position="absolute"),e.height=e.height||0,e.offset=(e.offset||0)+(h.padding.top||0);var i=this.refreshElement=d.createElement("div");i.className="refresh",i.style.cssText=["position: absolute","top: "+e.offset+"px","left: 0","width: 100%","height: "+e.height+"px","-webkit-transform: translateY(-"+e.height+"px) translateZ(9px)"].join(";"),e.html||"string"==typeof e.element?i.innerHTML=e.html||e.element:e.element instanceof HTMLElement&&i.appendChild(e.element),this.viewport.appendChild(i);var j;this.addScrollingHandler(function(){if(!j){{var a=g.getScrollTop();c(i)}i.style.webkitTransform="translateY("+-(e.height+a)+"px) translateZ(9px)",0>a?("none"===i.style.display&&(i.style.display=""),e.onpull&&e.onpull.call(g,-a)):""===i.style.display&&(i.style.display="none")}}),this.element.addEventListener("pulldownend",function(){if(!j){var a=g.getBoundaryOffset();a>e.height&&f()}},!1)}),b.scroll.plugin("update",function(a,c){function e(){if(!i){if(i=!0,!c.onupdate)throw new Error('no "onupdate" Handler');c.onupdate.call(f,function(){b.animation.requestFrame(function(){h.style.webkitTransition="",f.refresh(),h.style.webkitTransform="translateY("+(f.getMaxScrollTop()+c.height)+"px) translateZ(9px)",i=!1})})}}{var f=this,g=this.options;c.offset}getComputedStyle(this.viewport).position.match(/^relative|absolute$/)||(this.viewport.style.position="relative"),getComputedStyle(this.element).position.match(/^relative|absolute$/)||(this.element.style.position="absolute"),c.height=c.height||0,c.offset=(g.padding.bottom||0)-(c.offset||0);var h=this.updateElement=d.createElement("div");h.className="update",h.style.cssText=["position: absolute","bottom: "+c.offset+"px","left: 0","width: 100%","height: "+c.height+"px","-webkit-transform: translateY("+(f.getMaxScrollTop()+c.height)+"px) translateZ(9px)"].join(";"),"string"==typeof c.element?h.innerHTML=c.element:c.element instanceof HTMLElement&&h.appendChild(c.element),this.viewport.appendChild(h);var i;this.addScrollingHandler(function(){var a=f.getScrollTop(),b=f.getMaxScrollTop();h.style.webkitTransform="translateY("+(b+c.height-a)+"px) translateZ(9px)",i||(a>b?"none"===h.style.display&&(h.style.display=""):""===h.style.display&&(h.style.display="none"),b-a<.2*c.height?e():c.onpull&&c.onpull.call(f))})})}(window,window.lib||(window.lib={}));